**CHAPTER 2**

**ìŠ¤í”„ë§ ë¶€íŠ¸ ê³µí†µ ì‘ì—…**

### ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ê´€ë¦¬

**ì„¤ì • ì •ë³´ì˜ ì¤‘ìš”ì„±**

- ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¤‘ìš”í•œ ìš”ì†Œ
- ê°œë°œ(dev), í…ŒìŠ¤íŠ¸(test), ìŠ¤í…Œì´ì§•(staging), ìƒìš©(prod) ë“± í™˜ê²½ì— ë”°ë¼ ì„¤ì • ì •ë³´ ë‹¬ë¼ì§

**ì„¤ì • ì •ë³´ ê´€ë¦¬ì˜ ì–´ë ¤ì›€**

- ë°°í¬ í™˜ê²½ì— ë”°ë¼ ì„¤ì • ì •ë³´ ë³€ê²½ í•„ìš”
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ ì½”ë“œëŠ” ê±°ì˜ ë™ì¼
- ì„¤ì • ì •ë³´ ì¦ê°€ì— ë”°ë¥¸ ê´€ë¦¬ ì–´ë ¤ì›€

**ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ì„¤ì • ì •ë³´ ê´€ë¦¬**

- í”„ë¡œí¼í‹° íŒŒì¼, YAML íŒŒì¼, í™˜ê²½ ë³€ìˆ˜, ëª…ë ¹í–‰ ì¸ì ë“± ë‹¤ì–‘í•œ ë°©ë²• ì œê³µ
- ì†ŒìŠ¤ ì½”ë“œ ë³€ê²½ ì—†ì´ í™˜ê²½ë§ˆë‹¤ ì„¤ì • ì •ë³´ ì ìš© ê°€ëŠ¥

---

### SpringApplication í´ë˜ìŠ¤ ì‚¬ìš©

- SpringApplication í´ë˜ìŠ¤ë¡œ ì„¤ì • ì •ë³´ ì •ì˜
    - `setDefaultProperties()`Â ë©”ì„œë“œ ì‚¬ìš©
    - `java.util.Properties`Â ë˜ëŠ”Â `java.util.Map<String, Object>`Â íƒ€ì… ì¸ì
    - ì†ŒìŠ¤ ì½”ë“œì— ì„¤ì • ì •ë³´ ì§ì ‘ ì •ì˜
    - ë³€ê²½ ë¹ˆë„ê°€ ë‚®ì€ ì„¤ì • ì •ë³´ì— ì í•©
- application.properties íŒŒì¼ì—ì„œ ì„¤ì • ì •ë³´ ì„í¬íŠ¸
    - `spring.config.import`Â í”„ë¡œí¼í‹° ì‚¬ìš©
    - ë‹¤ë¥¸ properties ë˜ëŠ” .yml íŒŒì¼ ì„í¬íŠ¸
    - ex) `spring.config.import=classpath:additional-application.properties`
- ì„¤ì • íŒŒì¼ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ ì˜ˆì™¸ ì²˜ë¦¬
    - ê¸°ë³¸ì ìœ¼ë¡œÂ `ConfigDataLocationNotFoundException`Â ì˜ˆì™¸ ë°œìƒ
    - `spring.config.on-not-found`Â í”„ë¡œí¼í‹° ì‚¬ìš©
    - `ignore`Â ê°’ ì„¤ì • ì‹œ ì˜ˆì™¸ ë¬´ì‹œí•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ê³„ì† ì§„í–‰


```java
package com.manning.sbip.ch02;

import java.util.Properties;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class SpringBootAppDemoApplication {

	public static void main(String[] args) {
		
		Properties properties = new Properties();
		properties.setProperty("spring.config.on-not-found", "ignore");
		
		SpringApplication application = new SpringApplication(SpringBootAppDemoApplication.class);
		application.setDefaultProperties(properties);
		application.run(args);
	}
}
```

ì˜ˆì œ ì„¤ëª…

- `SpringApplication`Â í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- `spring.config.on-not-found`Â ì†ì„±ì„ "ignore"ë¡œ ì„¤ì •í•œÂ `Properties`Â ê°ì²´ ìƒì„±
- `setDefaultProperties()`Â ë©”ì„œë“œì—Â `Properties`Â ê°ì²´ ì „ë‹¬
- `run()`Â ë©”ì„œë“œ í˜¸ì¶œí•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

---

### @PropertySource ì‚¬ìš©

- í”„ë¡œí¼í‹° íŒŒì¼ ìœ„ì¹˜ ì§€ì •
    - `@PropertySource`Â ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš©
    - ì˜ˆì‹œ:Â `@PropertySource("classpath:dbConfig.properties")`
- ì„¤ì • ì •ë³´ ì½ì–´ì˜¤ê¸°:
    - `@Autowired`ë¥¼ ì‚¬ìš©í•˜ì—¬Â `Environment`Â ì¸ìŠ¤í„´ìŠ¤ ì£¼ì…
    - `env.getProperty("key")`Â ë©”ì„œë“œ ì‚¬ìš©í•˜ì—¬ ì„¤ì • ì •ë³´ ì ‘ê·¼
- ì˜ˆì œ


    ```java
    	@Configuration
    @PropertySource("classpath:dbConfig.properties")
    public class DbConfiguration {
    
      @Autowired
      private Environment env;
    
      @Override
      public String toString() {
        return "User: " + env.getProperty("user") + ", Password: " + env.getProperty("password");
      }
    }
    ```
    
    DbConfigurationÂ í´ë˜ìŠ¤
    
    - `@Configuration`Â ì• ë„ˆí…Œì´ì…˜ : ìŠ¤í”„ë§ í™˜ê²½ ì„¤ì • í´ë˜ìŠ¤ì„ì„ ë‚˜íƒ€ëƒ„
    - `@PropertySource`Â ì• ë„ˆí…Œì´ì…˜ :Â `dbConfig.properties`Â íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ì§€ì •
    - `Environment`Â ì¸ìŠ¤í„´ìŠ¤ ì£¼ì… :Â `@Autowired`Â ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬Â `Environment`Â ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…ë°›ìŒ
    - `toString()`Â ë©”ì„œë“œ : ì„¤ì • ì •ë³´ë¥¼ ì¶œë ¥
    
    ```java
    @SpringBootApplication
    public class SpringBootAppDemoApplication {
    
      private static final Logger log = LoggerFactory.getLogger(SpringBootAppDemoApplication.class);
    
      public static void main(String[] args) {
        ConfigurableApplicationContext applicationContext = SpringApplication.run(SpringBootAppDemoApplication.class, args);
        DbConfiguration dbConfiguration = applicationContext.getBean(DbConfiguration.class);
        log.info(dbConfiguration.toString());
      }
    }
    ```
    
    SpringBootAppDemoApplicationÂ í´ë˜ìŠ¤
    
    - `@SpringBootApplication`Â ì• ë„ˆí…Œì´ì…˜: ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ì„ ë‚˜íƒ€
    - `main()`Â ë©”ì„œë“œ:Â `DbConfiguration`Â ë¹ˆì„ ìƒì„±í•˜ê³ Â `toString()`Â ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì„¤ì • ì •ë³´ë¥¼ ì¶œë ¥
    
    ```java
    user=sa
    password=p@ssw0rd
    ```
    
    dbConfig.propertiesÂ íŒŒì¼
    
    - `user`Â í‚¤ : ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì ì´ë¦„ì„ ì„¤ì •
    - `password`Â í‚¤ : ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •
    
    ---
    
    ì‹¤í–‰ ê²°ê³¼
    
    - ì½˜ì†”ì—Â User, password ê°’ì´ ì¶œë ¥ë¨
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-04-06 á„‹á…©á„’á…® 4.48.19.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/81126acb-9242-416a-970d-78a4341edac1/dce14b79-3d6e-4eb9-9fa9-4a7d26948c3e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-04-06_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.48.19.png)

- @PropertySource ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ YML ë˜ëŠ” YAML íŒŒì¼ì„ ì§€ì •í•´ì„œ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ìŒ. YML íŒŒì¼ì„ ì‚¬ìš© í•˜ë ¤ë©´ ì¶”ê°€ ì‘ì—…ì´ í•„ìš”
- ìë°” 8 ì´í›„ë¡œëŠ” ë™ì¼í•œ ì• ë„ˆí…Œì´ì…˜ì„ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì—¬ëŸ¬ í”„ë¡œí¼í‹° íŒŒì¼ì„ ê°ê° @Property-Sourceë¡œ ì§€ì •í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ

```java
@Configuration
@PropertySource("classpath:dbConfig-properties")
@PropertySource("classpath:redisConfig properties")
public class DbConfiguration {
//
}
```

---

í™˜ê²½ ì„¤ì • íŒŒì¼

- **í”„ë¡œí¼í‹° íŒŒì¼ vs YML íŒŒì¼**
    - ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ”Â `application.properties`Â ë˜ëŠ”Â `application.yml`Â íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ì„¤ì • ì •ë³´ë¥¼ ê´€ë¦¬í•¨
        - ë‘ íŒŒì¼ ëª¨ë‘ ë™ì¼í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ë§Œ YML íŒŒì¼ì€ ë” ê°„ê²°í•˜ê³  ì½ê¸° ì‰¬ìš´ í˜•ì‹
            - ex)
                - application.properties

                  Properties

                    ```java
                    server.port=8081
                    spring.datasource.username=sa
                    spring.datasource.password=password
                    ```

                - application.yml

                  YAML

                    ```java
                    server:
                      port: 8081
                    spring:
                      datasource:
                        username: sa
                        password: password
                    ```

- **ì„¤ì • íŒŒì¼ ì´ë¦„ ë³€ê²½**
    - application.propertiesÂ ë˜ëŠ”Â application.ymlÂ íŒŒì¼ì˜ ì´ë¦„ì„ ë³€ê²½í•˜ë ¤ë©´Â `spring.config.name`Â í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©
        - ex)
            - sbip.ymlÂ íŒŒì¼ ìƒì„±
            - `java -jar target/config-data-file-0.0.1-SNAPSHOT.jar --spring.config.name=sbip`Â ì‹¤í–‰
- **ì„¤ì • íŒŒì¼ ìœ„ì¹˜**
    - ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ìŒ ìœ„ì¹˜ì— ìˆëŠ” ì„¤ì • íŒŒì¼ì„ ì½ìŒ
        - í´ë˜ìŠ¤íŒ¨ìŠ¤ ë£¨íŠ¸
            - í´ë˜ìŠ¤íŒ¨ìŠ¤Â `/config`Â íŒ¨í‚¤ì§€
            - í˜„ì¬ ë””ë ‰í„°ë¦¬
            - í˜„ì¬ ë””ë ‰í„°ë¦¬Â `/config`Â ë””ë ‰í„°ë¦¬
            - `/config`Â ë””ë ‰í„°ë¦¬ì˜ ë°”ë¡œ í•˜ìœ„ ë””ë ‰í„°ë¦¬
        - `spring.config.location`Â í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ìœ„ì¹˜ì— ìˆëŠ” ì„¤ì • íŒŒì¼ì„ ì½ì„ ìˆ˜ ìˆìŒ
        - ex)
            - dataÂ ë””ë ‰í„°ë¦¬ì—Â sbip.ymlÂ íŒŒì¼ ìƒì„±
            - `java -jar target/config-data-file-0.0.1-SNAPSHOT.jar --spring.config.location=data/sbip.yml`Â ì‹¤í–‰
- **ì„¤ì • íŒŒì¼ ì„ íƒ**
    - ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì—¬ëŸ¬ ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ë³„ ì„¤ì •ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŒ
        - ex)
            - application-dev.properties:Â server.port=9090
            - application-test.properties:Â server.port=9091
        - `spring.profiles.active`Â í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ í™œì„±í™”í•  í”„ë¡œíŒŒì¼ì„ ì§€ì •
        - ex)
            - `java -jar target/config-data-file-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev`Â ì‹¤í–‰
- **ì„¤ì • íŒŒì¼ ë¡œë”© ìˆœì„œ**
    - ì„¤ì • íŒŒì¼ì€ ë‹¤ìŒ ìˆœì„œë¡œ ë¡œë”©
        1. ì• í”Œë¦¬ì¼€ì´ì…˜ JAR íŒŒì¼ ì•ˆì— íŒ¨í‚¤ì§•ë˜ëŠ”Â `application.properties`(ë˜ëŠ” yml) íŒŒì¼
            1. ì• í”Œë¦¬ì¼€ì´ì…˜ JAR íŒŒì¼ ì•ˆì— íŒ¨í‚¤ì§•ë˜ëŠ”Â `application-(profiles).properties`(ë˜ëŠ” yml) íŒŒì¼
            2. ì• í”Œë¦¬ì¼€ì´ì…˜ JAR íŒŒì¼ ë°–ì—ì„œ íŒ¨í‚¤ì§•ë˜ëŠ”Â `application.properties`(ë˜ëŠ” yml) íŒŒì¼
            3. ì• í”Œë¦¬ì¼€ì´ì…˜ JAR íŒŒì¼ ë°–ì—ì„œ íŒ¨í‚¤ì§•ë˜ëŠ”Â `application-(profiles).properties`(ë˜ëŠ” yml) íŒŒì¼

### ì˜ˆì œ ì½”ë“œ

- ì„¤ì • íŒŒì¼ ì´ë¦„ ë³€ê²½

```java
public class SpringBootAppDemoApplication {

  public static void main(String[] args) {
    SpringApplication.run(SpringBootAppDemoApplication.class, args);
  }
}
```

```java
# sbip.yml
server:
  port: 8081
java -jar target/config-data-file-0.0.1-SNAPSHOT.jar --spring.config.name=sbip
```

- **ì„¤ì • íŒŒì¼ ìœ„ì¹˜**

```java
public class SpringBootAppDemoApplication {

  public static void main(String[] args) {
    SpringApplication.run(SpringBootAppDemoApplication.class, args);
  }
}
```

```java
# data/sbip.yml
server:
  port: 8081
java -jar target/config-data-file-0.0.1-SNAPSHOT.jar --spring.config.location=data/sbip.yml
```

<aside>
ğŸ’¡ **spring.config.nameê³¼ spring.config.properties**

- ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤íƒ€íŠ¸ì—… ê³¼ì • ì¤‘ ë§¤ìš° ì´ë¥¸ ë‹¨ê³„ì—ì„œ spring.config.nameê³¼ spring.con-fig.location ê°’ì„ ë¡œë”©í•¨.
- ê·¸ë˜ì„œ ì´ ë‘ í”„ë¡œí¼í‹°ë¥¼ application.properties íŒŒì¼ì´ë‚˜ application.yml íŒŒì¼ì—ì„œ ì§€ì •í•  ìˆ˜ ì—†ìŒ.
- ì´ ë‘ í”„ë¡œí¼í‹°ëŠ” SpringApplication.setDefaultProperties() ë©”ì„œë“œë‚˜ OS í™˜ê²½ ë³€ìˆ˜, ëª…ë ¹í–‰ ì¸ìë¡œ ì§€ì •í•´ì•¼ë§Œ ì •ìƒì ìœ¼ë¡œ ë™ì‘.
- ì˜ˆì œì—ì„œëŠ” ëª…ë ¹í–‰ ì¸ìë¡œ ì§€ì •
</aside>

<aside>
ğŸ’¡ ëª…ë ¹í–‰ ì¸ì

- ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ JAR íŒŒì¼ë¡œ ë§Œë“  í›„ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œ ëª…ë ¹í–‰ ì¸ìë¡œ ì„¤ì • ì •ë³´ë¥¼ ì§€ì •í•  ìˆ˜ë„ ìˆìŒ.
- ì•ì˜ ì˜ˆì œì—ì„œ spring.config.nameì´ë‚˜ spring.config.location í”„ë¡œí¼í‹°ë¥¼ ëª…ë ¹í–‰ ì¸ìë¡œ ì§€ì •í•´ì„œ ì‚¬ìš©
</aside>

- **ìš´ì˜ ì²´ì œ í™˜ê²½ ë³€ìˆ˜**
    - **í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©**
        - ìš´ì˜ ì²´ì œ í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì •í•œ ê°’ì„ ì„¤ì • ì •ë³´ íŒŒì¼ì—ì„œ ì½ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
        - ex)
            - application.properties

                ```java
                Properties
                app.timeout=${APP_TIMEOUT}
                ```

            - ìœˆë„ìš° :Â set APP_TIMEOUT=30
            - ë¦¬ëˆ…ìŠ¤ :Â export APP_TIMEOUT=30
            - java -jar target/config-data-file-0.0.1-SNAPSHOT.jarÂ ì‹¤í–‰

  â€”> ê²°ë¡ 

    - ëª…ë ¹í–‰ ì¸ì > ìš´ì˜ ì²´ì œ í™˜ê²½ ë³€ìˆ˜ >Â `@PropertySource`Â > ì„¤ì • ì •ë³´ íŒŒì¼

  ex)

    ```java
    @SpringBootApplication
    public class SpringBootAppDemoApplication {
    
      private static final Logger log = LoggerFactory.getLogger(SpringBootAppDemoApplication.class);
    
      public static void main(String[] args) {
        ConfigurableApplicationContext applicationContext = SpringApplication.run(SpringBootAppDemoApplication.class, args);
        Environment env = applicationContext.getBean(Environment.class);
        log.info("Configured application timeout value: " + env.getProperty("app.timeout"));
      }
    }
    ```


---

### @ConfigurationPropertiesë¡œ ì»¤ìŠ¤í…€ í”„ë¡œí¼í‹° ë§Œë“¤ê¸°

- **í”„ë¡œí¼í‹° ì ‘ê·¼:**Â í”„ë¡œí¼í‹°ì— ëŒ€í•œ getter/setter ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±
- **ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬:**Â `@NotNull`Â ê³¼ ê°™ì€ JSR-303 ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ
- **í™˜ê²½ ë³€ìˆ˜ ë°”ì¸ë”©:**Â í”„ë¡œí¼í‹° ì´ë¦„ì„ í™˜ê²½ ë³€ìˆ˜ ì´ë¦„ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •í•˜ë©´ ìë™ìœ¼ë¡œ ë°”ì¸ë”©ë¨

**ê¸°ë²• : @ConfigurationPropertiesë¥¼ ì‚¬ìš©í•œ ì»¤ìŠ¤í…€ í”„ë¡œí¼í‹° ì •ì˜**

- ìš”êµ¬ ì‚¬í•­
    - ì»¤ìŠ¤í…€ í”„ë¡œí¼í‹°ì— ëŒ€í•´ íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•˜ê³  ê°’ì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•´ì•¼ í•¨
- í•´ë²•
    - @Configuration ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•´ í”„ë¡œí¼í‹° ì •ë³´ë¥¼ ë‹´ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì¦.
    - ì´ë ‡ê²Œ í•˜ë©´ 0Value ì• ë„ˆí…Œì´ì…˜ì´ë‚˜ Environment ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ í”„ë¡œí¼í‹°ê°’ì„ ì½ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.

```java
<dependency>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-configuration-processor</artifactId>
	<optional>true</optional>
</dependency>
```

**@ConfigurationProperties ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš© ì‹œ ë©”íƒ€ë°ì´í„° ìƒì„±**

- `@ConfigurationProperties`Â ì• ë„ˆí…Œì´ì…˜ì´ ë¶™ì–´ ìˆëŠ” í´ë˜ìŠ¤ì— ëŒ€í•œ ë©”íƒ€ë°ì´í„°ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì • ì²˜ë¦¬ê¸°(configuration processor)ê°€ ìƒì„±í•¨
- ì´ ë©”íƒ€ë°ì´í„°ëŠ” IDEì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” ë° ì‚¬ìš©ë¨
    - application.properties(ë˜ëŠ” yml) íŒŒì¼ì— ê¸°ìˆ ëœ í”„ë¡œí¼í‹°ì— ëŒ€í•œ ìë™ ì™„ì„±
    - í”„ë¡œí¼í‹°ì— ëŒ€í•œ ë¬¸ì„œí™”

- ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì • ì²˜ë¦¬ê¸°ëŠ”Â `spring-boot-configuration-processor`ë¼ëŠ” Maven ì˜ì¡´ì„±ìœ¼ë¡œ ì œê³µë¨
- IDEì—ì„œ ìë™ ì™„ì„± ë° ë¬¸ì„œí™” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ì´ ì˜ì¡´ì„±ì„ í”„ë¡œì íŠ¸ì— ì¶”ê°€ í•„ìš”
- **ë©”íƒ€ë°ì´í„° ìƒì„± ê³¼ì •**
    1. ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì • ì²˜ë¦¬ê¸°ëŠ”Â `@ConfigurationProperties`Â ì• ë„ˆí…Œì´ì…˜ì´ ë¶™ì–´ ìˆëŠ” í´ë˜ìŠ¤ë¥¼ ê²€ìƒ‰
    2. í´ë˜ìŠ¤ì˜ í”„ë¡œí¼í‹° ì •ë³´ë¥¼ ë¶„ì„
    3. í”„ë¡œí¼í‹° ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë©”íƒ€ë°ì´í„°ë¥¼ ìƒì„±
    4. IDEëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ ì™„ì„± ë° ë¬¸ì„œí™” ê¸°ëŠ¥ì„ ì œê³µ
- **@ConfigurationProperties ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš©ë²•**
    - `prefix`Â ì†ì„±: í”„ë¡œí¼í‹° ì´ë¦„ì˜ ì ‘ë‘ì‚¬ë¥¼ ì§€ì •
    - `ignoreUnknownFields`Â ì†ì„±: ì„¤ì • íŒŒì¼ì— ì •ì˜ë˜ì§€ ì•Šì€ í”„ë¡œí¼í‹°ë¥¼ ë¬´ì‹œí• ì§€ ì—¬ë¶€ë¥¼ ì§€ì •
    - `ignoreInvalidFields`Â ì†ì„±: ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ì„ ê°€ì§„ í”„ë¡œí¼í‹°ë¥¼ ë¬´ì‹œí• ì§€ ì—¬ë¶€ë¥¼ ì§€ì •

**AppProperties í´ë˜ìŠ¤**

- `AppProperties`Â í´ë˜ìŠ¤ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ì„¤ì • ì •ë³´ë¥¼ ë‹´ëŠ” ì»¤ìŠ¤í…€ í”„ë¡œí¼í‹° í´ë˜ìŠ¤
- ì£¼ìš” íŠ¹ì§•
    - `@ConstructorBinding`Â ì• ë„ˆí…Œì´ì…˜ :Â ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…ì„ ì§€ì›
    - `@ConfigurationProperties`Â ì• ë„ˆí…Œì´ì…˜ :Â ì„¤ì • ì •ë³´ íŒŒì¼ì˜ í”„ë¡œí¼í‹°ì™€ ë§¤í•‘ë¨
    - ì ‘ë‘ì‚¬:Â `app.sbip.ct`
    - ë‚´ë¶€ ì •ì  í´ë˜ìŠ¤:Â `Security`
        - `enabled`Â í”„ë¡œí¼í‹°:Â ë³´ì•ˆ ê¸°ëŠ¥ í™œì„±í™” ì—¬ë¶€

    ---

- @ConstructorBinding ì• ë„ˆí…Œì´ì…˜
    - ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…ì„ ì§€ì›
    - `AppProperties`Â í´ë˜ìŠ¤ì˜ ìƒì„±ìëŠ”Â `name`,Â `ip`,Â `port`Â ì¸ìë¥¼ ë°›ìŒ
- @ConfigurationProperties ì• ë„ˆí…Œì´ì…˜
    - ì„¤ì • ì •ë³´ íŒŒì¼ì˜ í”„ë¡œí¼í‹°ì™€ ë§¤í•‘
    - ì ‘ë‘ì‚¬ :Â `app.sbip.ct`
    - `app.sbip.ct.name`Â í”„ë¡œí¼í‹°ëŠ”Â `name`Â ë³€ìˆ˜ì— ë§¤í•‘
    - `app.sbip.ct.ip`Â í”„ë¡œí¼í‹°ëŠ”Â `ip`Â ë³€ìˆ˜ì— ë§¤í•‘
    - `app.sbip.ct.port`Â í”„ë¡œí¼í‹°ëŠ”Â `port`Â ë³€ìˆ˜ì— ë§¤í•‘
- ë‚´ë¶€ ì •ì  í´ë˜ìŠ¤ : Security
    - ë³´ì•ˆ ê´€ë ¨ í”„ë¡œí¼í‹°ë¥¼ ë‹´ëŠ” í´ë˜ìŠ¤
    - `enabled`Â í”„ë¡œí¼í‹° :Â ë³´ì•ˆ ê¸°ëŠ¥ í™œì„±í™” ì—¬ë¶€

---

**AppService í´ë˜ìŠ¤**

- ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ì„œë¹„ìŠ¤ í´ë˜ìŠ¤
- ì£¼ìš” íŠ¹ì§•
    - `@Service`Â ì• ë„ˆí…Œì´ì…˜ : ìŠ¤í”„ë§ ë¶€íŠ¸ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ë¨
    - `AppProperties`Â ê°ì²´ ì£¼ì… : ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•´Â `AppProperties`Â ê°ì²´ë¥¼ ë°›ìŒ
    - `AppProperties`Â ê°ì²´ í™œìš©:Â `AppProperties`Â ê°ì²´ì˜ í”„ë¡œí¼í‹° ê°’ì„ ì‚¬ìš©í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰

---

- @Service ì• ë„ˆí…Œì´ì…˜
    - ìŠ¤í”„ë§ ë¶€íŠ¸ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ë¨
    - `AppService`Â í´ë˜ìŠ¤ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ ì°¾ì•„ì„œ ë¹ˆìœ¼ë¡œ ë“±ë¡
- AppProperties ê°ì²´ ì£¼ì…
    - ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•´Â `AppProperties`Â ê°ì²´ë¥¼ ë°›ìŒ
    - `AppService`Â í´ë˜ìŠ¤ëŠ” ìƒì„±ìë¥¼ í†µí•´Â `AppProperties`Â ê°ì²´ë¥¼ ì£¼ì…ë°›ìŒ
- AppProperties ê°ì²´ í™œìš©
    - `AppProperties`Â ê°ì²´ì˜ í”„ë¡œí¼í‹° ê°’ì„ ì‚¬ìš©í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰
    - `AppService`Â í´ë˜ìŠ¤ëŠ”Â `AppProperties`Â ê°ì²´ì˜Â `name`,Â `ip`,Â `port`Â í”„ë¡œí¼í‹° ê°’ì„ ì‚¬ìš©í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰ ê°€ëŠ¥
- @EnableConfigurationProperties
    - ëª…ì‹œì ìœ¼ë¡œ í´ë˜ìŠ¤ ë“±ë¡ í•„ìš”
- @ConfigurationPropertiesScan
    - ê¸°ì¤€ íŒ¨í‚¤ì§€ í•˜ìœ„ì— ìˆëŠ” @ConfigurationProperties ì• ë„ˆí…Œì´ì…˜ì´ ë¶™ì–´ ìˆëŠ” í´ë˜ìŠ¤ë¥¼ ìë™ íƒìƒ‰

---

### ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ì½”ë“œ ì‹¤í–‰

**CommandLineRunner :**Â ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ íŠ¹ì • ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤

- ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ íŠ¹ì • ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ CommandLineRunner ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨.
    - CommandLineRunnerëŠ” run() ë©”ì„œë“œ í•˜ë‚˜ë§Œ ê°€ì§€ê³  ìˆìœ¼ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”ê°€ ì™„ë£Œë˜ê¸° ì§ì „ì— ì‹¤í–‰
- `CommandLineRunner`ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
    1. **ìŠ¤í”„ë§ ë¶€íŠ¸ ë©”ì¸ í´ë˜ìŠ¤ê°€ CommandLineRunner ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„**

        ```java
        @SpringBootApplication
        public class CourseTrackerApplication implements CommandLineRunner {
            @Override
            public void run(String... args) throws Exception {
                // ...
            }
        }
        ```

    2. **@Beanì„ ì‚¬ìš©í•˜ì—¬ CommandLineRunner ë¹ˆ ì •ì˜**

        ```java
        @SpringBootApplication
        public class CourseTrackerApplication implements {
            @Bean
            public CommandLineRunner commandLineRunner() {
                return args -> {
                    // ...
                };
            }
        }
        ```

    3. **@Component ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ CommandLineRunner ì»´í¬ë„ŒíŠ¸ ì •ì˜**

        ```java
        @Order  // ~~ ë°‘ì— ì„¤ëª… ì°¸ê³ 
        @Component
        public class MyCommandLineRunner implements CommandLineRunner {
            @Override
            public void run(String... args) throws Exception {
                // ...
            }
        }
        ```

        - ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ ì»´í¬ë„ŒíŠ¸ íƒìƒ‰ ê¸°ëŠ¥ì„ í†µí•´ MyCommandLineRunner ì»´í¬ë„ŒíŠ¸ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ë©° ë¡œê·¸ê°€ ì½˜ì†”ì— í‘œì‹œ.
        - CommandLineRunner êµ¬í˜„ì²´ëŠ” ì—¬ëŸ¬ ê°œë¥¼ ë“±ë¡í•  ìˆ˜ ìˆìœ¼ë©° @0rder ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ì‹¤í–‰ ìˆœì„œë¥¼ ì •í•´ì¤˜ì•¼ í•¨.
        - `@Order`Â ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ì‹¤í–‰ ìˆœì„œ ì§€ì • ê°€ëŠ¥

            ```java
            @Order(2)
            @Component
            public class AnotherCommandLineRunner implements CommandLineRunner {
              @Override
            	public void run (String... args) throws Exception {
            		// ...
            	ï½
            }
            ```

        - ë¹ˆì„ ì£¼ì… ë°›ì•„ ì‚¬ìš©í•˜ëŠ” CommandLineRunner êµ¬í˜„

            ```java
            @Bean
            public CommandLineRunner printCourses(CourseRepository courseRepository) {
                return args -> {
                    // ...
                    courseRepository.findAll().forEach(System.out::println);
                };
            }
            ```


    ---


### ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê¹… ì»¤ìŠ¤í„°ë§ˆì´ì§•

- ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¡œê·¸ë°± í”„ë ˆì„ì›Œí¬ ì‚¬ìš©
- ë‹¤ë¥¸ ë¡œê¹… í”„ë ˆì„ì›Œí¬ (ex. Log4j2) ì‚¬ìš© ê°€ëŠ¥
- ë¡œê·¸ ë ˆë²¨, ì–´íœë”, í•„í„° ë“± ë‹¤ì–‘í•œ ì„¤ì • ê°€ëŠ¥

ex)

**1. ê¸°ë³¸ ë¡œê·¸ íŒ¨í„´ ì„¤ì •**

**Properties**

```jsx
logging.pattern.console=%clr%d{dd-MM-yyyy HH:mm:ss.SSS3) {yellow} %clr(${PID:- 3) {green}
%magenta ([%thread]) %highlight([%-5level]) %clr(%-40.401ogger{39}){cyan} %msg%n
```

**2. Log4j2 ì‚¬ìš© ì„¤ì •**

- pom.xmlì—ì„œ spring-boot-starter-logging ì œê±°í•˜ê³  spring-boot-starter-log4j2 ì¶”ê°€
- log4j2.xml ì„¤ì • íŒŒì¼ ìƒì„±

**3. Log4j2 ì„¤ì •**

**ex)**

```java
<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">
< Properties>
<Property name="LOG_PATTERN">
%d{yyyy-MM-dd HH: mm:ss. SSS} [%5p] [%15.15t] %-40.40câ‰¤1.3 : %m%n%ex
</Property>
</Properties>
< Appenders>
< Console name="ConsoleAppender" target="SYSTEM_OUT">
<PatternLayout pattern="$ELOG_PATTERNï¼Ÿ"/>
</Console>
â€¹RollingFile name="FileAppender"
fileName="logs/application-10g4j2.10g" filePattern="logs/application-10g4j2-%d{vYVY-MM-dd3-%i.10g">
â‘¤
< PatternLayout>
< Pattern>${LOG_PATTERN}</Pattern>
</PatternLayout>
â€¹ Policies>
Â«SizeBasedTriggeringPolicy size="10MB" />
<TimeBasedTriggeringPolicy interval="7 />
</Policies>
<DefaultRolloverStrategy max="18"/>
â‘§
</RollingFile >
</ Appenders>
< Loggers>
â‘¨
<Logger name="com.manning.sbip" level="debug" additivity="false">
<AppenderRef ref="FileAppender"/>
</ Logger>
10
< Logger name="org.springframework.boot" level="info" additivity="false">
<AppenderRef ref="ConsoleAppender"/>
</ Logger>
<Root level="info">
12
<AppenderRef ref="FileAppender"/>
<AppenderRef ref="ConsoleAppender"/>
</Root>
</Loggers>
</Configuration>
```

**4. ë¡œê·¸ ì¶œë ¥ ì½”ë“œ**

```java
private static Logger logger = LoggerFactory.getLogger(CourseTrackerApplication.class);

public static void main(String[] args) {
    SpringApplication.run(CourseTrackerApplication.class, args);
    logger.info("CourseTrackerApplication started successfully with Log4j2 configuration");
}
```